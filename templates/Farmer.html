<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Form Page</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .tick-mark {
            color: green;
        }
    </style>
</head>
<body>

    <!-- Farmer Details Form -->
    <form id="farmerForm" method="post" action="{{ url_for('get_farmer') }}">
        <label for="farmerName">Farmer Name:</label>
        <input type="text" name="farmerName" id="farmerName" required>

        <label for="farmerEmail">Farmer Email:</label>
        <input type="email" name="farmerEmail" id="farmerEmail" required>

        <label for="farmerAddress">Farmer Address:</label>
        <input type="text" name="farmerAddress" id="farmerAddress" required>

        <input type="button" value="Submit Farmer Details" onclick="submitForm('farmerForm', 'farmerTick')">
        <span id="farmerTick" class="tick-mark"></span>
    </form>

    <!-- Farm Details Form -->
    <form id="farmForm" method="post" action="{{ url_for('get_farm') }}">
        <label for="sampleCollectionDate">Date of Sample Collection:</label>
        <input type="date" name="sampleCollectionDate" id="sampleCollectionDate" required>
    
        <label for="surveyNumber">Survey No., Khasra No./Dag No:</label>
        <input type="text" name="surveyNumber" id="surveyNumber">
    
        <label for="farmSize">Farm Size:</label>
        <input type="text" name="farmSize" id="farmSize" required>
    
        <label for="geoPosition">Geo Position (GPS):</label>
        <input type="text" name="geoPosition" id="geoPosition">

        <input type="button" value="Submit Farm Details" onclick="submitForm('farmForm', 'farmTick')">
        <span id="farmTick" class="tick-mark"></span>
    </form>

    <!-- Crop Details Form -->
    <form id="cropForm" method="post" action="{{ url_for('get_crop') }}">
        <label for="soilImage">Upload Soil Image:</label>
        <input type="file" name="soilImage" id="soilImage" accept="image/*" required>

        <label for="nitrogen">Nitrogen:</label>
        <input type="text" name="nitrogen" id="nitrogen" required>

        <label for="phosphorous">Phosphorous:</label>
        <input type="text" name="phosphorous" id="phosphorous" required>

        <label for="potassium">Potassium:</label>
        <input type="text" name="potassium" id="potassium" required>

        <label for="ph">pH:</label>
        <input type="text" name="ph" id="ph" required>

        <label for="electricConductivity">Electric Conductivity:</label>
        <input type="text" name="electricConductivity" id="electricConductivity" required>

        <label for="salinity">Salinity:</label>
        <input type="text" name="salinity" id="salinity" required>

        <label for="temperature">Temperature:</label>
        <input type="text" name="temperature" id="temperature" required>

        <label for="moisture">Moisture:</label>
        <input type="text" name="moisture" id="moisture" required>
        <input type="button" value="Submit Crop Details" onclick="submitForm('cropForm', 'cropTick')">
        <span id="cropTick" class="tick-mark"></span>
        <span id="responseValue"></span>

    </form>

    <a href="/download_pdf" download="SoilHealthCard.pdf">
        <button>Download PDF</button>
    </a>

    <script>
        function submitForm(formId, tickId) {
            var form = $('#' + formId);
    
            $.ajax({
                type: form.attr('method'),
                url: form.attr('action'),
                data: form.serialize(),
                success: function(response) {
                    console.log(response);
    
                    // Display the tick mark
                    $('#' + tickId).text('âœ”');
                    $('#' + tickId).show();
    
                    // Display the returned value
                    $('#responseValue').text('Returned Value: ' + JSON.stringify(response));
                    $('#responseValue').show();
    
                    // Disable form inputs
                    form.find(':input').prop('disabled', true);
                },
                error: function(error) {
                    console.log(error);
                }
            });
        }
    </script>
    
</body>
</html>
